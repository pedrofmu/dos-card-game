<IfFile "/certs/selfsigned.crt">
<VirtualHost *:443>
    ServerName your.domain.com

    SSLEngine on
    SSLCertificateFile /certs/selfsigned.crt
    SSLCertificateKeyFile /certs/selfsigned.key

    ProxyPreserveHost On

    ProxyPass /api/ http://deno_server:8000/
    ProxyPassReverse /api/ http://deno_server:8000/

    ProxyPass /api/ws ws://deno_server:8000/ws
    ProxyPassReverse /api/ws ws://deno_server:8000/ws

    <Location /api/ws>
        ProxyPreserveHost On
        Require all granted
        Header set Connection "upgrade"
        Header set Upgrade "websocket"
    </Location>

    DocumentRoot "/usr/local/apache2/htdocs"
</VirtualHost>
</IfFile>
